<!doctype html>
<html lang="id">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Dokumentasi Pemasangan</title>

<style>
:root{
  --bg:#05070c;
  --text:#eef2ff;
  --muted:#9aa4c7;
  --line:rgba(255,255,255,.08);
  --accent:#6da9ff;
}
*{box-sizing:border-box}
body{
  margin:0;
  font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial;
  background:
    radial-gradient(1200px 600px at 20% 0%, rgba(109,169,255,.15), transparent 60%),
    radial-gradient(900px 500px at 80% 20%, rgba(87,255,193,.12), transparent 60%),
    var(--bg);
  color:var(--text);
}

/* ===== LANDING ===== */
.hero{
  min-height:100vh;
  display:flex;
  align-items:center;
  justify-content:center;
  text-align:center;
  padding:40px 20px;
}
.hero-inner{
  max-width:900px;
}
.hero h1{
  font-size:clamp(28px,5vw,56px);
  line-height:1.1;
  margin:0 0 20px;
  letter-spacing:.5px;
}
.hero p{
  font-size:clamp(14px,2.2vw,18px);
  color:var(--muted);
  line-height:1.7;
  margin:0 auto;
  max-width:700px;
}
.scroll-hint{
  margin-top:50px;
  font-size:12px;
  color:var(--muted);
  letter-spacing:2px;
  opacity:.7;
  animation:blink 1.8s infinite;
}
@keyframes blink{
  0%,100%{opacity:.3}
  50%{opacity:1}
}

/* ===== GALLERY ===== */
.section{
  padding:60px 20px;
  max-width:1200px;
  margin:auto;
}
.controls{
  display:grid;
  grid-template-columns:220px 1fr auto;
  gap:10px;
  margin-bottom:14px;
}
@media(max-width:800px){
  .controls{grid-template-columns:1fr}
}
select,input{
  width:100%;
  padding:10px;
  border-radius:12px;
  border:1px solid var(--line);
  background:rgba(0,0,0,.35);
  color:var(--text);
}
.grid{
  display:grid;
  grid-template-columns:repeat(4,1fr);
  gap:14px;
}
@media(max-width:1000px){.grid{grid-template-columns:repeat(3,1fr)}}
@media(max-width:700px){.grid{grid-template-columns:repeat(2,1fr)}}
@media(max-width:450px){.grid{grid-template-columns:1fr}}

.card{
  border:1px solid var(--line);
  border-radius:16px;
  overflow:hidden;
  background:rgba(0,0,0,.35);
  cursor:pointer;
  transition:.2s;
}
.card:hover{transform:translateY(-3px)}
.card img{
  width:100%;
  height:190px;
  object-fit:cover;
}
.meta{
  padding:10px;
}
.badge{
  font-size:11px;
  padding:2px 8px;
  border-radius:999px;
  border:1px solid var(--line);
  display:inline-block;
  margin-right:6px;
}
.title{
  margin-top:6px;
  font-size:13px;
  font-weight:700;
}

/* ===== MODAL ZOOM ===== */
.modal{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,.85);
  display:none;
  align-items:center;
  justify-content:center;
  z-index:999;
}
.modal.open{display:flex}
.modal-inner{
  position:relative;
  width:95vw;
  height:90vh;
  overflow:hidden;
}
.modal img{
  position:absolute;
  top:50%;
  left:50%;
  transform:translate(-50%,-50%) scale(1);
  transform-origin:center;
  max-width:none;
  cursor:grab;
}
.modal button{
  position:absolute;
  top:14px;
  right:14px;
  z-index:10;
  padding:8px 12px;
  border-radius:10px;
  border:1px solid var(--line);
  background:rgba(0,0,0,.5);
  color:#fff;
  font-weight:700;
  cursor:pointer;
}
</style>
</head>

<body>

<!-- LANDING -->
<section class="hero">
  <div class="hero-inner">
    <h1>Dokumentasi Pemasangan<br>Visual & Lapangan</h1>
    <p>
      Halaman ini menampilkan hasil pekerjaan pemasangan secara visual,
      sebagai dokumentasi aktivitas lapangan yang tersusun rapi,
      mudah ditelusuri, dan siap ditampilkan kapan saja.
    </p>
    <div class="scroll-hint">SCROLL ↓</div>
  </div>
</section>

<!-- GALLERY -->
<section class="section">
  <div class="controls">
    <select id="category"></select>
    <input id="search" placeholder="Cari judul dokumentasi..." />
    <div id="count" style="align-self:center;font-size:12px;color:var(--muted)">0 item</div>
  </div>
  <div id="grid" class="grid"></div>
</section>

<!-- MODAL -->
<div id="modal" class="modal">
  <div class="modal-inner">
    <button id="close">✕</button>
    <img id="modalImg" />
  </div>
</div>

<script>
/* ===== DATA ===== */
const CATEGORIES=[
  {key:"neonbox",label:"Neonbox"},
  {key:"plang",label:"Plang"},
  {key:"huruf-timbul",label:"Huruf Timbul"},
  {key:"cutting-akrilik",label:"Cutting Akrilik"},
  {key:"jasa-pasang-sticker",label:"Jasa Pasang Sticker"}
];
const MANIFEST="./gallery-manifest.json";

/* ===== INIT ===== */
const catSel=document.getElementById("category");
catSel.innerHTML='<option value="all">Semua Kategori</option>'+
  CATEGORIES.map(c=>`<option value="${c.key}">${c.label}</option>`).join("");

let DATA=[];
fetch(MANIFEST).then(r=>r.json()).then(j=>{
  DATA=j.items||[];
  render();
});

/* ===== RENDER ===== */
function render(){
  const q=document.getElementById("search").value.toLowerCase();
  const c=catSel.value;
  const grid=document.getElementById("grid");
  grid.innerHTML="";
  const f=DATA.filter(i=>
    (c==="all"||i.category===c) &&
    i.title.toLowerCase().includes(q)
  );
  document.getElementById("count").textContent=f.length+" item";
  f.forEach(i=>{
    const d=document.createElement("div");
    d.className="card";
    d.innerHTML=`
      <img src="./${i.file}">
      <div class="meta">
        <span class="badge">${i.category}</span>
        <span class="badge">${i.date}</span>
        <div class="title">${i.title}</div>
      </div>`;
    d.onclick=()=>openModal(i.file);
    grid.appendChild(d);
  });
}
catSel.onchange=render;
search.oninput=render;

/* ===== MODAL ZOOM ===== */
const modal=document.getElementById("modal");
const img=document.getElementById("modalImg");
let scale=1,dx=0,dy=0,isDrag=false,sx=0,sy=0;

function openModal(src){
  modal.classList.add("open");
  img.src="./"+src;
  resetZoom();
}
function closeModal(){
  modal.classList.remove("open");
}
document.getElementById("close").onclick=closeModal;
modal.onclick=e=>{if(e.target===modal)closeModal()};

function resetZoom(){
  scale=1;dx=0;dy=0;
  apply();
}
function apply(){
  img.style.transform=
    `translate(calc(-50% + ${dx}px),calc(-50% + ${dy}px)) scale(${scale})`;
}

/* zoom wheel */
img.onwheel=e=>{
  e.preventDefault();
  scale+=e.deltaY*-0.001;
  scale=Math.min(Math.max(0.5,scale),5);
  apply();
};

/* drag */
img.onmousedown=e=>{
  isDrag=true;sx=e.clientX;sy=e.clientY;
  img.style.cursor="grabbing";
};
window.onmouseup=()=>{isDrag=false;img.style.cursor="grab"};
window.onmousemove=e=>{
  if(!isDrag)return;
  dx+=e.clientX-sx;
  dy+=e.clientY-sy;
  sx=e.clientX;sy=e.clientY;
  apply();
};

/* double click reset */
img.ondblclick=resetZoom;
</script>

</body>
</html>
